# ===============================================
# REST API Adapter Configuration - Production Environment
# ===============================================
# 운영 환경 전용 설정
# 공통 설정은 rest-api.yml 참조
#
# @author development-team
# @since 1.0.0
# ===============================================

# ===============================================
# Security Configuration Override (REQUIRED)
# ===============================================
security:
  # 서비스 토큰 설정 (Internal API - Gateway → AuthHub)
  service-token:
    # 운영에서 서비스 토큰 인증 필수
    enabled: true
    # 서비스 토큰 시크릿 (Secrets Manager에서 주입)
    secret: ${SECURITY_SERVICE_TOKEN_SECRET}
  jwt:
    # RSA 키 설정 (RSA 키가 Secrets Manager에 등록되면 활성화)
    # TODO: RSA 키 등록 후 enabled: true로 변경
    rsa:
      enabled: ${JWT_RSA_ENABLED:false}
      key-id: ${JWT_RSA_KEY_ID:authhub-prod-key-1}
      public-key-path: ${JWT_RSA_PUBLIC_KEY_PATH:}
      private-key-path: ${JWT_RSA_PRIVATE_KEY_PATH:}
  gateway:
    # 운영에서 Gateway 인증 필수
    enabled: true
  cookie:
    # 운영에서 HTTPS 필수
    secure: true
    # CSRF 보호를 위한 strict 권장
    same-site: strict
    # 환경변수로 도메인 설정
    domain: ${COOKIE_DOMAIN:authhub.com}

# ===============================================
# SpringDoc OpenAPI Configuration Override
# ===============================================
# 환경변수로 제어 (기본값: 비활성화)
# 인증된 사용자만 접근 가능 (SecurityConfig에서 authenticated() 설정)
springdoc:
  swagger-ui:
    enabled: ${SWAGGER_ENABLED:true}
  api-docs:
    enabled: ${SWAGGER_ENABLED:true}

# ===============================================
# API Error Configuration Override
# ===============================================
api:
  error:
    # 운영에서는 RFC 7807 에러 문서 URL 사용 권장
    use-about-blank: false
    base-url: ${ERROR_DOCS_BASE_URL:https://api.authhub.com/problems}
