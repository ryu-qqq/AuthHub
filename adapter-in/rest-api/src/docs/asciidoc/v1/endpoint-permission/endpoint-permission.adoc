[[endpoint-permission]]
=== 엔드포인트 권한 (Endpoint Permission)

엔드포인트별 권한 관리 API입니다.

각 엔드포인트에 접근하기 위해 필요한 권한(requiredPermissions)과 역할(requiredRoles)을 정의합니다.
권한/역할 검증은 **OR 조건**으로, 정의된 권한 중 하나 **또는** 역할 중 하나를 가지면 접근이 허용됩니다.

[[endpoint-permission-create]]
==== 엔드포인트 권한 생성

새로운 엔드포인트 권한을 생성합니다.

===== HTTP Request

include::{snippets}/endpoint-permission-create/http-request.adoc[]

===== Request Fields

include::{snippets}/endpoint-permission-create/request-fields.adoc[]

===== HTTP Response

include::{snippets}/endpoint-permission-create/http-response.adoc[]

===== Response Fields

include::{snippets}/endpoint-permission-create/response-fields.adoc[]

[[endpoint-permission-update]]
==== 엔드포인트 권한 수정

엔드포인트 권한 정보를 수정합니다.

===== HTTP Request

include::{snippets}/endpoint-permission-update/http-request.adoc[]

===== Path Parameters

include::{snippets}/endpoint-permission-update/path-parameters.adoc[]

===== Request Fields

include::{snippets}/endpoint-permission-update/request-fields.adoc[]

===== HTTP Response

include::{snippets}/endpoint-permission-update/http-response.adoc[]

[[endpoint-permission-delete]]
==== 엔드포인트 권한 삭제

엔드포인트 권한을 삭제합니다. (소프트 삭제)

===== HTTP Request

include::{snippets}/endpoint-permission-delete/http-request.adoc[]

===== Path Parameters

include::{snippets}/endpoint-permission-delete/path-parameters.adoc[]

===== HTTP Response

include::{snippets}/endpoint-permission-delete/http-response.adoc[]

[[endpoint-permission-get]]
==== 엔드포인트 권한 단건 조회

엔드포인트 권한 정보를 조회합니다.

===== HTTP Request

include::{snippets}/endpoint-permission-get/http-request.adoc[]

===== Path Parameters

include::{snippets}/endpoint-permission-get/path-parameters.adoc[]

===== HTTP Response

include::{snippets}/endpoint-permission-get/http-response.adoc[]

===== Response Fields

include::{snippets}/endpoint-permission-get/response-fields.adoc[]

[[endpoint-permission-search]]
==== 엔드포인트 권한 목록 조회

엔드포인트 권한 목록을 조회합니다.

===== HTTP Request

include::{snippets}/endpoint-permission-search/http-request.adoc[]

===== Query Parameters

include::{snippets}/endpoint-permission-search/query-parameters.adoc[]

===== HTTP Response

include::{snippets}/endpoint-permission-search/http-response.adoc[]

===== Response Fields

include::{snippets}/endpoint-permission-search/response-fields.adoc[]

[[endpoint-permission-spec]]
==== 서비스별 엔드포인트 권한 스펙 조회 (Gateway용)

Gateway에서 캐싱할 서비스별 엔드포인트 권한 스펙을 조회합니다.

이 API는 Gateway가 시작 시 또는 주기적으로 호출하여 권한 검사에 사용할 엔드포인트 스펙을 캐싱하는 용도입니다.

IMPORTANT: 이 API는 내부 통신용으로 설계되었으며, Gateway에서만 호출해야 합니다.

===== HTTP Request

include::{snippets}/endpoint-permission-spec/http-request.adoc[]

===== Query Parameters

include::{snippets}/endpoint-permission-spec/query-parameters.adoc[]

===== HTTP Response

include::{snippets}/endpoint-permission-spec/http-response.adoc[]

===== Response Fields

include::{snippets}/endpoint-permission-spec/response-fields.adoc[]

===== Response 예시 설명

[cols="1,4", options="header"]
|===
| 필드 | 설명

| `endpoints[].method`
| HTTP 메서드 (GET, POST, PUT, DELETE 등)

| `endpoints[].pattern`
| 경로 패턴 (예: `/api/v1/users/{userId}`)

| `endpoints[].service`
| 서비스 이름 (예: `auth-hub`)

| `endpoints[].requiredRoles`
| 필요 역할 목록 (OR 조건, 빈 배열이면 역할 검사 스킵)

| `endpoints[].requiredPermissions`
| 필요 권한 목록 (OR 조건, 빈 배열이면 권한 검사 스킵)

| `endpoints[].isPublic`
| 공개 여부 (`true`면 인증/권한 검사 스킵)

| `endpoints[].requireMfa`
| MFA 필수 여부 (향후 확장용)

| `version`
| 스펙 버전 (ISO-8601 형식, Gateway에서 캐시 무효화 판단에 사용)
|===
