= AuthHub API Documentation
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:
:stylesheet: custom-style.css

[[overview]]
== 개요

AuthHub API V1 문서입니다.

=== 기본 정보

[cols="1,3"]
|===
|항목 |값

|Base URL
|`/api/v1/auth`

|인증 방식
|JWT Bearer Token / Gateway Header

|Content-Type
|`application/json`
|===

=== 공통 응답 형식

모든 API 응답은 다음 형식을 따릅니다.

[source,json]
----
{
    "data": { ... },
    "timestamp": "2025-01-27T10:30:00",
    "traceId": "550e8400-e29b-41d4-a716-446655440000"
}
----

=== 페이징 응답 (Offset 기반)

[source,json]
----
{
    "data": {
        "content": [ ... ],
        "page": 0,
        "size": 20,
        "totalElements": 100,
        "totalPages": 5
    },
    "timestamp": "2025-01-27T10:30:00",
    "traceId": "550e8400-e29b-41d4-a716-446655440000"
}
----

=== 에러 응답 (RFC 7807 Problem Details)

[source,json]
----
{
    "type": "about:blank",
    "title": "Bad Request",
    "status": 400,
    "detail": "요청 파라미터가 유효하지 않습니다.",
    "instance": "/api/v1/auth/users",
    "traceId": "550e8400-e29b-41d4-a716-446655440000",
    "timestamp": "2025-01-27T10:30:00",
    "errors": [
        {
            "field": "email",
            "message": "이메일 형식이 올바르지 않습니다."
        }
    ]
}
----

[[common-enums]]
== 공통 Enum 정의

=== TenantStatus (테넌트 상태)

[cols="1,2"]
|===
|값 |설명

|`ACTIVE`
|활성 상태

|`INACTIVE`
|비활성 상태
|===

=== OrganizationStatus (조직 상태)

[cols="1,2"]
|===
|값 |설명

|`ACTIVE`
|활성 상태

|`INACTIVE`
|비활성 상태
|===

=== UserStatus (사용자 상태)

[cols="1,2"]
|===
|값 |설명

|`ACTIVE`
|정상 활성 상태 (로그인 가능)

|`INACTIVE`
|비활성 상태 (이메일 미인증 등)

|`SUSPENDED`
|일시 정지 상태 (관리자에 의한 정지)
|===

=== RoleType (역할 유형)

[cols="1,2"]
|===
|값 |설명

|`SYSTEM`
|시스템 기본 역할 (수정/삭제 불가)

|`CUSTOM`
|사용자 정의 역할 (수정/삭제 가능)
|===

=== PermissionType (권한 유형)

[cols="1,2"]
|===
|값 |설명

|`SYSTEM`
|시스템 기본 권한 (수정/삭제 불가)

|`CUSTOM`
|사용자 정의 권한 (수정/삭제 가능)
|===

=== HttpMethod (HTTP 메서드)

[cols="1,2"]
|===
|값 |설명

|`GET`
|리소스 조회

|`POST`
|리소스 생성

|`PUT`
|리소스 전체 수정

|`PATCH`
|리소스 부분 수정

|`DELETE`
|리소스 삭제

|`HEAD`
|헤더만 조회

|`OPTIONS`
|지원 메서드 조회
|===

[[api-token]]
== 인증 API

include::token/token.adoc[leveloffset=+1]

[[api-tenant]]
== 테넌트 API

include::tenant/tenant.adoc[leveloffset=+1]

[[api-organization]]
== 조직 API

include::organization/organization.adoc[leveloffset=+1]

[[api-user]]
== 사용자 API

include::user/user.adoc[leveloffset=+1]

[[api-role]]
== 역할 API

include::role/role.adoc[leveloffset=+1]

[[api-permission]]
== 권한 API

include::permission/permission.adoc[leveloffset=+1]

[[api-permission-endpoint]]
== 권한 엔드포인트 API

include::permission-endpoint/permission-endpoint.adoc[leveloffset=+1]

[[api-role-permission]]
== 역할-권한 API

include::role-permission/role-permission.adoc[leveloffset=+1]

[[api-user-role]]
== 사용자-역할 API

include::user-role/user-role.adoc[leveloffset=+1]

[[api-internal]]
== 내부 API (Internal)

include::internal/internal.adoc[leveloffset=+1]
